@using Microsoft.AspNet.Identity
@model CarDealer.Models.ApplicationUser
@if (Request.IsAuthenticated)
{
    @*using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", }))
        {
        @Html.AntiForgeryToken()*@

    @*<ul class="nav navbar-nav navbar-right">
            <li>
                @Html.ActionLink("Hello " + User.Identity.GetUserName() + "!", "Index", "Manage", routeValues: null, htmlAttributes: new { title = "Manage" })
            </li>
            <li><a href="javascript:document.getElementById('logoutForm').submit()">Log off</a></li>
        </ul>*@

    <li class="dropdown user user-menu">
        <!-- Menu Toggle Button -->
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            <!-- The user image in the navbar-->
            <img src="~/dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
            <!-- hidden-xs hides the username on small devices so only the image appears. -->
            <span class="">@User.Identity.GetUserName()</span>
        </a>
        <ul class="dropdown-menu">
            <!-- The user image in the menu -->
            <li class="user-header">
                <img src="~/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">

                <p>
                    @User.Identity.GetUserName() - Web Developer
                    <small>Member since Nov. 2012</small>
                </p>
            </li>
            <!-- Menu Body -->
            <li class="user-body">
                <div class="row">
                    <div class="col-xs-4 text-center">
                    @Html.ActionLink("Change Password", "ChangePassword","Manage")
                    </div>
                    <div class="col-xs-4 text-center">
                        @if(!string.IsNullOrEmpty(Model.PhoneNumber))
                        {
                            @Html.ActionLink("Change PhoneNumber", "ChangePhoneNumber","Manage")
                        }
                        else
                        {
                            @Html.ActionLink("Add PhoneNumber", "AddPhoneNumber", "Manage")
                        }                                                
                        
                    </div>
                    <div class="col-xs-4 text-center">
                        <a href="#">Friends</a>
                    </div>
                </div>
                <!-- /.row -->
            </li>
            <!-- Menu Footer-->
            <li class="user-footer">
                <div class="pull-left">
                    <span>@Html.DisplayFor(model=>model.Roles.First())</span>
                </div>
                <div class="pull-right">
                    @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", }))
                    {
                        @Html.AntiForgeryToken()
                        <a href="javascript:document.getElementById('logoutForm').submit()" class="btn btn-default btn-flat">Log Off</a>
                    }
                </div>
            </li>
        </ul>
    </li>

    //}
}
