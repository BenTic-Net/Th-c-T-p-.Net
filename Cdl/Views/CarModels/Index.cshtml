@using Microsoft.AspNet.Identity
@model IEnumerable<CarDealer.Models.CarModel>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<h2>Index</h2>


    @{
        var action = HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString().CheckViewAct(User.Identity.GetUserId());


        if (action != null && !string.IsNullOrEmpty(User.Identity.GetUserId()))
        {
            if (action.Contains("Create"))
            {
                <p> @Html.ActionLink("Create New", "Create")</p>


            }
        }
    }
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MetaTitle)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DisplayOrder)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SeoTitle)
        </th>
        
        <th>
            @Html.DisplayNameFor(model => model.MetaKeywords)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MetaDescriptions)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Waranty)
        </th>
        <th>
            Manufacture Name
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MetaTitle)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DisplayOrder)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SeoTitle)
        </td>
        
        <td>
            @Html.DisplayFor(modelItem => item.MetaKeywords)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MetaDescriptions)
        </td>
        <td>
            @*@Html.DisplayFor(modelItem => item.Waranty)*@
            @{ string wrt = item.Waranty.Traslate();}
            @(wrt)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ToManufacture.FullName)
        </td>
        <td>
        @{
            // var action = HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString().CheckViewAct(User.Identity.GetUserId());


            if (action != null && !string.IsNullOrEmpty(User.Identity.GetUserId()))
            {
                if (action.Contains("Edit"))
                {

                    <span>@Html.ActionLink("Edit", "Edit", new { id = item.ID })</span>
                }
                if (action.Contains("Details"))
                { <span>
                @Html.ActionLink("Details", "Details", new { id = item.ID })</span> }

                if (action.Contains("Delete"))
                {<span>
                @Html.ActionLink("Delete", "Delete", new { id = item.ID })</span>}
                }





                }
</td>
    </tr>
}

</table>
